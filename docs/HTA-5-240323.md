# Collapseç»„ä»¶

## Ideas

1. ä½¿ç”¨Cssä¸­çš„transitionæ¥å®ç°å±•å¼€æˆ–æ”¶èµ·çš„åŠ¨ç”»æ•ˆæœ
2. ä½¿ç”¨Gridå¸ƒå±€æ¥æ§åˆ¶å­å…ƒç´ é«˜åº¦

> note: transitionåŠ¨ç”»å¿…é¡»è¦è®¾ç½®å›ºå®šçš„å€¼æ‰èƒ½èµ·åˆ°åŠ¨ç”»æ•ˆæœï¼Œä½†åˆä¸èƒ½è®¾ç½®å›ºå®šçš„é«˜åº¦ï¼Œå› ä¸ºæ˜¯æ ¹æ®<slot>æ¥æ§åˆ¶å†…å®¹åŒºåŸŸçš„ï¼Œæ‰€ä»¥ç”¨<slot>å†…å®¹æ’‘èµ·å­æ ‡ç­¾é«˜åº¦ï¼Œgirdå¸ƒå±€å°†å­æ ‡ç­¾çš„é«˜åº¦è®¾ç½®ä¸º1frï¼Œä»è€Œå®ç°è®¾ç½®å›ºå®šçš„å€¼

## steps

### 1ã€template
collapseç»„ä»¶ç”±æ ‡é¢˜å’Œå†…å®¹åŒºåŸŸç»„æˆ
```vue

<template>
  <div @click='handlerClick' :class='collapseClass' class='collapse'>
    <div class='collapse__title'>
      <span>collapse title</span>

      <!-- è¿™é‡Œå¯ä»¥æ”¾ç½®ä¸€ä¸ªç®­å¤´å›¾æ ‡ï¼Œæ ¹æ®å†…å®¹åŒºåŸŸï¼ˆå±•å¼€oræ”¶èµ·)æ—‹è½¬ç®­å¤´ -->
      <!-- <img src='' />  -->
    </div>

    <div class='collapse__content'>
      <!-- 
        ä½¿gridå¸ƒå±€åªå½±å“åˆ°.collapse__grid-itemå…ƒç´ æ ‡ç­¾
       -->
      <div class='collapse__grid-item'>
        <slot></slot>
      </div>
    </div>
  </div>

</template>

```

### 2ã€style
åœ¨styleä¸­æ¥å®ç°å±•å¼€å’Œæ”¶èµ·çš„åŠ¨ç”»æ•ˆæœ

```css
<style lang='scss' scoped>
/* æ²¡æœ‰å¤ªè€ƒè™‘æ ·å¼ï¼Œè¯·æŒ‰ç…§å®é™…ä¸šåŠ¡æ¥è°ƒæ•´æ ·å¼ï¼Œè¿™é‡Œåªå®ç°åŠŸèƒ½ */
.collapse {

  &__title {
    width: 100%;
    height: 40px;
    line-height: 40px;
    cursor: pointer;
    background-color: #fff;
    padding: 0 7px;
    box-sizing: border-box;
    > span {
      font-size: 13px;
      color: #333;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    /* > img {
      // å¯ä»¥å†™ç®­å¤´çš„æ ·å¼ï¼Œè¿™é‡Œå°±çœç•¥äº†
    } */
  }


  &__content {
    width: 100%;
    background-color: #f5f5f5;
    display: grid;
    grid-template-rows: 0fr;
    overflow: hidden;
    transition: grid-template-rows .3s;
  }
  &__grid-item {
    min-height: 0; 
    /* 
    è®¾ç½®ä¸º0ï¼š
      1.å…ƒç´ é«˜åº¦é»˜è®¤æ˜¯æ ¹æ®å†…å®¹åŒºæ¥æ˜¾ç¤ºé«˜åº¦ï¼Œè¿™é‡Œè¦ç­‰<slot>å†…å®¹ï¼Œæ‰€ä»¥è¿™æ—¶æ˜¯æ²¡æœ‰é«˜åº¦çš„ï¼Œå¯¼è‡´grid-template-rows: 0frä¹Ÿæ˜¯æ²¡æœ‰é«˜åº¦çš„ï¼ŒåŒæ—¶ä¹Ÿå½±å“åˆ°transitionåŠ¨ç”»å¤±æ•ˆ
      2.å› ä¸ºè¦æ ¹æ®<slot>å†…å®¹æ¥æ’‘èµ·é«˜åº¦ï¼Œæ‰€ä»¥ä¸èƒ½è®¾ç½®heightå±æ€§ï¼Œè¦è®¾ç½®æœ€å°é«˜åº¦ä¸º0ï¼Œè¿™æ—¶0frä¹Ÿä¼šæ’‘èµ·å†…å®¹é«˜åº¦ï¼Œåªä¸è¿‡ä¸º0ï¼Œtransitionä¹Ÿè®¾ç½®æˆåŠŸé»˜è®¤å€¼ï¼Œåç»­ä¿®æ”¹é«˜åº¦ï¼Œå°±ä¼šä½¿ç”¨è¿‡æ¸¡çš„åŠ¨ç”»æ•ˆæœ
      3. ä¸ªäººç†è§£ ~~
    */
  }

  &--expand {
    .collapse__content {
      grid-template-rows: 1fr;
    }
  }
}

</style>

```


### 3ã€script
åŠ¨ç”»å†™å®Œäº†ï¼Œå°±åªå·®jsæ¥æ§åˆ¶äº†
```javascript
<script setup>
import { ref, computed } from 'vue'
defineOptinons({
  name: 'Collapse'
})

const isExpand = ref(false)
const collapseClass = computed(() => {
  return isExpand.value ? 'collapse--expand' : ''
})
const handlerClick = function() {
  isExpand.value = !isExpand.value
}
</script>

```

## done

å®Œæˆå•¦ ğŸ‰ğŸ‰ğŸ‰
