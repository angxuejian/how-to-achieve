# é¢œè‰²é€‰æ‹©å™¨

## ç›®æ ‡
çœ‹åˆ°è¿™ä¸ª[å¾ˆé…·çš„ç½‘ç«™](https://color.hailpixel.com/)  æ‰€ä»¥ä¹Ÿæƒ³çœ‹çœ‹æ€ä¹ˆå¼„ï¼Ÿ

å…ˆæ¥æŒ‘æˆ˜å…¥é—¨ç‰ˆ..

## æ€è·¯

é¦–é¡µè¦è§£å†³ä¸€ä¸ª è¯¯è§£ã€‚

æˆ‘ä»¬å¹³å¸¸æ‰€çœ‹åˆ°çš„é¢œè‰²é€‰æ‹©å™¨ï¼Œå…¶å®åªæ˜¯CSSçš„å›ºå®šæ ·å¼ï¼Œé¼ æ ‡æ‹–åŠ¨ååšä¸åˆ°è·å–é¢œè‰²çš„æ“ä½œã€‚

çœŸæ­£è·å–åˆ°é¢œè‰²çš„æ˜¯ä»[åæ ‡æ¨¡å‹ - HSVé¢œè‰²æ¨¡å‹](https://baike.baidu.com/item/HSV%E9%A2%9C%E8%89%B2%E6%A8%A1%E5%9E%8B/21501482)ä¸­è®¡ç®—å‡ºæ¥çš„ã€‚åŸç†æ˜¯ï¼šé¼ æ ‡æ‹–åŠ¨æ—¶è·å–åŒºåŸŸçš„ **X, Y(æ•°å­¦åæ ‡ç³»)** çš„æ•°å€¼ï¼Œå°†å…¶è½¬æ¢ä¸º **V, S(HSVåæ ‡ç³»)** ä¸­çš„æ•°å€¼ï¼Œä»è€Œè®¡ç®—å‡ºå½“å‰ä½ç½®çš„é¢œè‰²å€¼


æ‰€ä»¥ **é¢œè‰²é€‰æ‹©å™¨ = CSSå±‚ + åæ ‡å±‚**


<br>
<br>

ã€ç¤ºä¾‹å›¾ã€‘(è¿™é‡Œæ˜¯Element UIä¸‹çš„[ColorPickerç»„ä»¶](https://element.eleme.cn/#/zh-CN/component/color-picker))

![HSVåæ ‡ç³»ä¸æ•°å­¦åæ ‡ç³»çš„å¯¹åº”å…³ç³»](https://mmbiz.qpic.cn/mmbiz_png/xoIzuYKVBOzLjK4NCiaq9bZVib4ibuxSjroFicxf879puBBZPLkLU8whuM1LD4hZ87dVuhtiblIDGvrg5Eia17VPxciag/0?wx_fmt=png)

### CSSå±‚

é€‰æ‹©å™¨çš„æ ·å¼ã€è‡ªå·±æ ¹æ®UIå›¾æˆ–è€…å–œå¥½æ¥å°±å¯ä»¥äº†ã€‚ç®€å•è¯´ä¸€ä¸‹CSSèƒŒæ™¯å›¾

èƒŒæ™¯æ¸å˜ - ã€ç¤ºä¾‹å›¾ã€‘ä¸­çš„ V å’Œ S
```
/** 
* è¦æ³¨æ„ï¼ è¿™é‡Œæ˜¯æœ‰ä¸‰å±‚èƒŒæ™¯è‰²
*
* ç¬¬ä¸€å±‚ è“è‰²èƒŒæ™¯å›¾
* ç¬¬äºŒå±‚ Væ–¹å‘ ç™½è‰²æ¸å˜
* ç¬¬ä¸‰å±‚ Sæ–¹å‘ é»‘è‰²æ¸å˜
*/

// ç¬¬ä¸€å±‚ è“è‰²èƒŒæ™¯å›¾
background: rgb(0, 125, 255)

// ç¬¬äºŒå±‚ Væ–¹å‘ ç™½è‰²æ¸å˜
background: linear-gradient(90deg,#fff,hsla(0,0%,100%,0))

// ç¬¬ä¸‰å±‚ Sæ–¹å‘ é»‘è‰²æ¸å˜
background: linear-gradient(0deg,#000,transparent)

```


å½©è‰²æ¸å˜ - ã€ç¤ºä¾‹å›¾ã€‘ä¸­çš„ H
```
background: linear-gradient(180deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)
```


### åæ ‡å±‚

1ã€HSVåæ ‡ç³»èŒƒå›´
> è‰²è°ƒH: å–å€¼èŒƒå›´ä¸º0Â° ~ 360Â°<br>
> é¥±å’Œåº¦Sï¼šå–å€¼èŒƒå›´ä¸º0.0 ~ 1.0<br>
> äº®åº¦Vï¼šå–å€¼èŒƒå›´ä¸º0.0(é»‘è‰²) ~ 1.0(ç™½è‰²)<br>

2ã€HSVåæ ‡ç³»ä¸æ•°å­¦åæ ‡ç³»çš„å¯¹åº”å…³ç³»

HSVåæ ‡ç³» | æ•°å­¦åæ ‡ç³» 
:------: | :---: 
V        | Y 
S        | X 
H        |   


3ã€HSVåæ ‡ç³»ä¸æ•°å­¦åæ ‡ç³»çš„è½¬æ¢å…¬å¼

> HSVè½¬æ¢é¢œè‰²æœ‰é€šç”¨å…¬å¼, æŒ‰ç…§å…¬å¼è½¬æ¢å³å¯ã€‚

> [HSVè½¬RGBå…¬å¼](https://www.rapidtables.com/convert/color/hsv-to-rgb.html)<br>
> [RGBè½¬HSVå…¬å¼](https://www.rapidtables.com/convert/color/rgb-to-hsv.html)<br>
> è¿˜æœ‰RGBè½¬HEXï¼ŒRGBè½¬HSLéƒ½åœ¨[è¿™é‡Œ](https://www.rapidtables.com/convert/color/)

<br>
<br>

ã€å®è·µç¤ºä¾‹ã€‘- HSVè½¬RGB
```
/**
 * hsv è½¬ rgb
 * @param {number} h è‰²è°ƒ 0 - 360
 * @param {number} s é¥±å’Œåº¦ 0 - 100
 * @param {number} v æ˜åº¦ 0 - 100
*/
function hsv2rgb(h, s, v) {

  // å°† åæ ‡å€¼ è½¬æ¢ä¸º ç™¾åˆ†æ¯” 0% - 100%
  s = s / 100
  v = v / 100

  const i = parseInt(h / 60), // å°† åæ ‡å€¼ è½¬æ¢ä¸º è§’åº¦ 0Â° - 360Â°
        f = h / 60 - i,
        p = v * (1 - s),
        q = v * (1 - f * s),
        t = v * (1 - (1 - f) * s);

  const list = [
    [v, t, p],
    [q, v, p],
    [p, v, t],
    [p, q, v],
    [t, p, v],
    [v, p, q]
  ]

  const rgb = list[i % 6].map(hr_round) // i mod 6: æ˜¯å› ä¸ºæœ‰å…­ç§å¯èƒ½æ€§

  return rgb 
}



<!-- å…¶ä»–éœ€è¦é…åˆçš„æ–¹æ³• -->


/**
 * hsv è½¬ rgb | è½¬ä¸ºrgbèŒƒå›´
 * @param {number} n [0-1]
*/
const hr_round = n => {
  // list[i % 6] å–å‡ºå€¼èŒƒå›´å‡ä¸º [0-1, 0-1, 0-1] 
  // ä¾æ¬¡ * 255 å è½¬ä¸ºrgb 0-255 çš„èŒƒå›´ [0-255, 0-255, 0-255]

  return Math.round(n * 255)
}
```

<br>

ã€å®è·µç¤ºä¾‹ã€‘- RBGè½¬HSV

```
/**
 * rgb è½¬ hsv
 * @param {number} r red  0 - 255
 * @param {number} g green 0 - 255
 * @param {number} b blue 0 - 255
*/
function rgb2hsv(r, g, b) {
  const [red, green, blue] = [r, g, b].map(rh_range)

  let h = 0,
      s = 0,
      v = 0;

  const max = Math.max(red, green, blue),
        min = Math.min(red, green, blue);

  const l = max - min

  v = max
  s = l / max

  const list = {
    [red]: clearNaN((green - blue), l) + (g < b ? 6 : 0),
    [green]: 2 + clearNaN((blue - red), l),
    [blue]: 4 + clearNaN((red - green), l),
  }

  h = list[max] / 6
  if (h < 0) h + 360

  const data = {
    h: Math.round(h * 360),
    s: Math.round(s * 100),
    v: Math.round(v * 100)
  }
  return data
}



<!-- å…¶ä»–éœ€è¦é…åˆçš„æ–¹æ³• -->


/**
 * rgb è½¬ hsv | è½¬ä¸ºhsvèŒƒå›´
 * @param {number} n [0-1] 
*/
const rh_range = n => {
  // n çš„èŒƒå›´ä¸º 0-1
  // ä¾æ¬¡ / 255 å è½¬ä¸ºhsv çš„èŒƒå›´ [0-360, 0-100, 0-100]
  
  return n / 255
}


/**
 * é˜²æ­¢å‡ºç° 0 / 0 = NaN æƒ…å†µå‡ºç°
 * @param {number} x è¢«é™¤æ•° 
 * @param {number} y é™¤æ•° 
*/
const clearNaN = (x, y) => {
  if (x === 0 && y === 0) return 0
  else return x / y
}

```


4ã€å…¬å¼è½¬æ¢å¸¸è§é—®é¢˜

1. æ•°å­¦åæ ‡ç³»ä¸DOMèŠ‚ç‚¹çš„å†²çªï¼Ÿ
  
    DOMå…ƒç´ ä¸­çš„èŠ‚ç‚¹åæ ‡åŸç‚¹ä¸ºå·¦ä¸Šè§’ï¼Œè€Œæ•°å­¦åæ ‡åŸç‚¹ä¸ºå·¦ä¸‹è§’ï¼Œè¿™é‡Œéœ€è¦æ‰‹åŠ¨å°†**Yåæ ‡**è½¬æ¢

2. æ•°å­¦åæ ‡ç³»ä¸HSVåæ ‡ç³»çš„èŒƒå›´å†²çªï¼Ÿ

    å› HSVåæ ‡ç³»æ˜¯æœ‰å–å€¼èŒƒå›´ï¼Œè€ŒDOMèŠ‚ç‚¹åœ¨ä¸åŒçš„è®¾å¤‡ä¸Šè¡¨ç°ä¸åŒï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è®¡ç®—DOMèŠ‚ç‚¹çš„æ­¥é•¿ï¼Œä»è€Œè¾¾åˆ° 0 ~ 1 çš„å–å€¼èŒƒå›´ï¼Œé¡ºåŠ¿è®¡ç®—å‡ºHSVåæ ‡ç³»ä¸­çš„Væ–¹å‘å’ŒSæ–¹å‘

3. RGBè½¬HSVæ—¶ä¼šå‡ºç°NaN?

    RGBåœ¨è½¬HSVæ—¶ï¼Œredã€greenã€blueå€¼ä¼šå‡ºç°ä¸º0çš„æƒ…å†µï¼Œå½“éƒ½ä¸º0æ—¶ï¼Œæ‰§è¡Œé™¤æ³•è¿ç®—å°±ä¼šå‡ºç°  0 / 0 çš„æƒ…å†µã€‚
    
    ç”±äºjsé—®é¢˜(0 / 0 = NaN)å°±ä¼šå¾—å‡ºNaNçš„é—®é¢˜ï¼Œæ‰€ä»¥è¦æ‰‹åŠ¨æ’é™¤ 0 / 0 çš„æƒ…å†µ





## å‚è€ƒæ–‡çŒ®
[1] [MakerGYT](https://github.com/MakerGYT/mini-color-picker) çœ‹äº†MakerGYTå†™çš„mini-color-pickeræºç , éå¸¸å¼ºğŸ¤™ğŸ¤™ğŸ¤™

[2] [é¢œè‰²å…¬å¼è½¬æ¢](https://www.rapidtables.com/convert/color/)

[3] [åœ¨çº¿æµ‹è¯•å·¥å…·,æ ¡éªŒè®¡ç®—æ˜¯å¦æ­£ç¡®](https://c.runoob.com/front-end/868)

[4] [hsvç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/HSV/547122)

[5] [Elementçš„color-picker](https://element.eleme.cn/#/zh-CN/component/color-picker)