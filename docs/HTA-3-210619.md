# 图片模式

## 目标
看到小程序中的 [image 标签的 mode 属性，](https://developers.weixin.qq.com/miniprogram/dev/component/image.html)觉得很不错，所以也想在小程序之后使用。

## 思路
> 思来想去很久、我能想到唯一的突破口就只有`canvas`下的`drawImage`方法来实现。<br><br>
> `scaleToFill模式` 直接让图片显示就可以了，这里就不做赘述。

缩放模式：ctx.drawImage(image, dx, dy, dw, dh)

裁剪模式：ctx.drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh)

请在已经了解 [drawImage方法](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage) 后继续观看
<br>
<br>
<br>

【示例一】假设我们有一张图片宽是600，高是500。而image标签样式为宽是160，高240

我们设置以下变量（适用于以下全部模式）
```
const iw = 600;
const ih = 500;
const scale  = iw / ih;  // 图片宽高比例

const cw = 160;
const ch = 240;
```


### AspectFit
> 缩放模式，保持纵横比缩放图片，使图片的长边能完全显示出来。也就是说，可以完整地将图片显示出来。

简单来说、就是只显示图片的长边，短边等比例缩放即可。

```
function getAspectFix(iw, ih, cw, ch) {
  
  let [dx, dy, dw, dh] = []

  if (iw < ih) {
    dw = ch * scale
    dh = ch

  } else {
    dw = cw
    dh = cw / scale
  }

  dx = (iw - cw) / 2
  dy = (ih - ch) / 2

  return [dx, dy, dw, dh]
}
```
