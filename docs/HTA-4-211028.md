# 自定义滚动条

## 目标
看到许多网站，都有自己的自定义滚动条，所有想要学习和了解其中的秘密

## 思路
**为什么要使用自定义滚动条？**

大多数都是浏览器自带的滚动条会影响到页面布局，或者在特定页面影响页面美观度，所以要使用一个不影响页面布局和可自定义样式的滚动条。

所以自定义滚动条只要实现**不影响页面布局和可自定义样式**并且还**保留滚动条自身的功能**即可。


### <span id='foreword'>前言</span>

在没有研究透如何实现自定义滚动条并且业务上又需要解决滚动条问题时，曾经在stack overflow上看到可以通过**CSS样式**隐藏自身滚动条，并且保留滚动条效果。

```html
<div class="outer">
  <div class="inner">
    <div class="content"></div>
  </div>
</div>
```
``` css
.outer {
  width: 500px;
  height: 500px;
  position: relative;
  overflow: hidden;
  margin: 0 auto;
}
.inner {
  position: absolute;
  left: 0;
  overflow-x: hidden;
  overflow-y: scroll;
}
.content {
  width: 500px;
  height: 484px; /* 要比 .outer 的height少一点*/
  margin: 0;
  padding: 0;
}
```

<!-- 这种解决方法最明显的缺点就是用户看不出来此处是可以滚动的，必须鼠标悬停上面滚动齿轮才可以滚动，对于新用户是非常不友好的。

不过优点也就是解决了滚动条影响布局问题并且还保留滚动条自身功能。 -->

由上面解决方法得知

- 优点：解决了滚动条影响布局问题并且还保留滚动条自身功能
- 缺点：鼠标悬停在滚动区域并不会显示滚动条，无法拖拽滚动、只能鼠标滚动齿轮才可以滚动

所以只要解决`鼠标悬停时显示滚动条`与`可以拖拽滚动条`两点问题即可。


### 页面布局和自定义样式

#### 1、隐藏默认滚动条

通过[前言](#foreword)我们已经得知可以用CSS隐藏滚动条了

这里我们介绍另一个方法，也是Element UI 组件使用的方法，在Element中使用的方法与[前言](#foreword)中使用的方法有异曲同工之处

都是
`外部div - overflow: hidden`
`内部div - overflow:scroll`
将滚动条隐藏视线之外。

```html
<div class='scrollbar'>
  <div class='scrollbar__wrap'>
    <div class="reszie">
      <div> <!-- 这里是内容 --> </div>
    </div>
  </div>
</div>
```
```css
.scrollbar {
  width: 500px;
  height: 500px;
  overflow: hidden;
  position: relative;
}
.scrollbar__wrap {
  height: 100%;
  overflow: scroll;
  margin-right: -17px;
  padding-bottom: 17px;
}
```

**17px**是通过`内部div宽度 - 外部div宽度 = 滚动条宽度`

```javascript
const scrollWidth = inner.offsetWidth - outer.offsetWidth // 17
```
> 1、这里需要注意的是必须要让**外部div有滚动条**才可以计算出正确宽度<br>
> 2、offsetWidth: 元素的边框、内边距和元素的水平滚动条


<!-- 为什么要设置**padding-bottom: 17px**，是因为height已经设置100%了，只能用padding，将滚动条挤出外部div高度 -->

<!-- 为什么不设置**padding-right: 17px**，是因为设置padding-right后，必须要设置width:100%，才可以在边缘处将滚动条挤出，然而这时内部数据都会有padding-right: 17px的边距，导致内部数据不会与边框对齐 -->


#### 2、设置滚动条样式

分别定义X轴和Y轴滚动条，将其定位并放置在**外部div的右上角和左下角**，来充当浏览器滚动条功能

```html
<div class='scrollbar'>
  <div class='scrollbar__wrap'>
    <div class="reszie">
      <div> <!-- 这里是内容 --> </div>
    </div>
  </div>

  <!-- y轴滚动条 -->
  <div class='scrollbar__axis-y'>
    <div class='axis-hover'></div>
  </div>

  <!-- x轴滚动条 -->
  <div class='scrollbar__axis-x'>
    <div class='axis-hover'></div>
  </div>
</div>
```
```css
.scrollbar__wrap-y, .scrollbar__wrap-x {
  overflow: scroll;
}

.scrollbar__axis-y {
  /* 滚动条 y轴背景样式 */
  position: absolute;
  right: 0px;
  top: 2px;
  height: 100%;
  width: 8px;
  div {
    /* 滚动条 y轴样式 */
    width: 100%;
    border-radius: 10px;
    transition: 0.3s background;
    background: transparent;
    position: absolute;
  }
}

.scrollbar__axis-x {
  /* 滚动条 x轴背景样式 */
  position: absolute;
  width: 100%;
  left: 0px;
  bottom: 0px;
  height: 8px;
  div {
    /* 滚动条 x轴样式 */
    height: 100%;
    border-radius: 10px;
    transition: 0.3s background;
    background: transparent;
    position: absolute;
  }
}
```

到这里就可以自定义滚动条样式了，可以根据实际的业务需求来修改滚动条样式。

### 实现滚动条功能

## 最后


## 参考文献

[1] [Element的scrollbar](https://github.com/ElemeFE/element/tree/dev/packages/scrollbar) Element的scrollbar组件源码, 非常强🤙🤙🤙